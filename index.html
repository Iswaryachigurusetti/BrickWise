
<!DOCTYPE html>
<html>  
<head> 
  <title>BrickWise ‚Äì Soil Finder</title>
  <style> 
    body { font-family: 'Segoe UI', sans-serif; margin: 0; background: #f4f4f4; }
    header { background: #b22222; color: white; padding: 20px; text-align: center; }
    nav { display: flex; background: #fff; border-bottom: 1px solid #ccc; }
    nav button {
      flex: 1; padding: 15px; border: none; background: #fff; cursor: pointer;
      font-weight: bold; color: #b22222; border-right: 1px solid #ccc;
    }
    nav button:hover { background: #f9f9f9; }
    nav button.active { background: #b22222; color: white; }
    section { display: none; padding: 20px; max-width: 800px; margin: auto; background: white; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); margin-top: 20px; }
    section.active { display: block; }
    .form-group { margin-bottom: 15px; }
    label { font-weight: bold; display: block; margin-bottom: 5px; }
    input, textarea, select {
      width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px;
    }
    button.submit {
      background: #b22222; color: white; padding: 10px 20px; border: none;
      border-radius: 6px; font-weight: bold; cursor: pointer;
    }
    .soil-card {
      border: 1px solid #ccc; padding: 15px; border-radius: 8px; margin-bottom: 15px;
      background: #fdfdfd;
    }
/* Shared styling for login and signup inputs */
#login-form input,
#signup-form input {
  padding: 12px;
  margin-bottom: 15px;
  border: 1px solid #ccc;
  border-radius: 6px;
  width: 100%;
  box-sizing: border-box;
}

/* Shared styling for login and signup buttons */
#login-form button,
#signup-form button {
  padding: 12px;
  background-color: #b22222;
  color: white;
  border: none;
  border-radius: 6px;
  font-weight: bold;
  cursor: pointer;
  width: 100%;
}
 #profile-form input {
  padding: 12px;
  margin-bottom: 15px;
  border: 1px solid #ccc;
  border-radius: 6px;
  width: 100%;
  box-sizing: border-box;
}

#profile-form button {
  padding: 12px;
  background-color: #b22222;
  color: white;
  border: none;
  border-radius: 6px;
  font-weight: bold;
  cursor: pointer;
  width: 100%;
}

#profile {
  max-width: 400px;
  margin: auto;
  background: #fff;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
}
.card {
  background: #f9f9f9;
  border: 1px solid #ddd;
  border-radius: 10px;
  padding: 20px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  max-width: 400px;
  margin: 20px auto;
  text-align: left;
}

.card h3 {
  margin-top: 0;
  color: #b22222;
}

.card p {
  margin: 10px 0;
  font-size: 16px;
}

.card button {
  margin-top: 15px;
  padding: 10px;
  background-color: #b22222;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}

  </style>
</head>
<body>

<header>
  <h1>üß± BrickWise ‚Äì Best Soil Finder for Brick Makers</h1>
</header>
<nav>
  <button class="tab active" onclick="showTab('home', this)">üè† Home</button>
  <button class="tab" onclick="showTab('seller', this)">üß± Seller</button>
  <button class="tab" onclick="showTab('feedback', this)">‚≠ê Feedback</button>
  <button class="tab" onclick="showTab('help', this)">üÜò Help</button>
  <button class="tab" onclick="showTab('language', this)">üåê Language</button>
  <button class="tab" onclick="showTab('settings', this)">‚öôÔ∏è Settings</button>
  <button class="tab" onclick="showTab('login', this)">üîê Login</button>
  <button class="tab" onclick="showTab('profile', this)">üë§ Profile</button>
</nav>


<!-- Home Tab -->
<section id="home" class="active">
  <h2 data-i18n="availableSoils">üì¶ Available Soils</h2>
  <div id="soilList">Loading soil listings...</div>
  <div class="soil-card">
    <h3>Red Sandy Soil</h3>
    <p><strong>Location:</strong> Chittoor</p>
    <p><strong>Price:</strong> ‚Çπ450/ton</p>
    <p><strong>Description:</strong> High clay content, ideal for bricks</p>
    <p><strong>Seller:</strong> Ramesh Bricks</p>
    <p><strong>Contact:</strong> 9876543210</p>
  </div>
  <form id="orderForm">
    <h3 data-i18n="placeOrderTitle">üõí Place Order</h3>
    <div class="form-group"><label data-i18n="orderNameLabel">Name</label><input type="text" id="buyerName" required></div>
    <div class="form-group"><label data-i18n="orderPhoneLabel">Phone</label><input type="text" id="buyerPhone" required></div>
    <div class="form-group"><label data-i18n="orderAddressLabel">Address</label><textarea id="buyerAddress" required></textarea></div>
    <div class="form-group"><label data-i18n="orderSoilLabel">Soil Name</label><input type="text" id="selectedSoil" required></div>
    <div class="form-group"><label data-i18n="orderQuantityLabel">Quantity (tons)</label><input type="number" id="quantity" required></div>
	<div class="form-group"><label data-i18n="orderQuantityLabel">Price per Ton)</label><input type="number" id="price" required></div>
    <button class="submit" type="submit" data-i18n="placeOrderBtn">Place Order</button>
  </form>
</section>

<!-- Seller Tab -->
<section id="seller">
  <h2 data-i18n="uploadSoilTitle">üì§ Upload Soil</h2>
  <form id="uploadForm">
    <div class="form-group"><label data-i18n="uploadSoilNameLabel">Soil Name</label><input type="text" id="soilName" required></div>
    <div class="form-group"><label data-i18n="uploadLocationLabel">Location</label><input type="text" id="location" required></div>
    <div class="form-group"><label data-i18n="uploadPriceLabel">Price (‚Çπ)</label><input type="number" id="price" required></div>
    <div class="form-group"><label data-i18n="uploadDescriptionLabel">Description</label><textarea id="description"></textarea></div>
    <div class="form-group"><label data-i18n="uploadSellerNameLabel">Seller Name</label><input type="text" id="sellerName" required></div>
    <div class="form-group"><label data-i18n="uploadContactLabel">Contact Info</label><input type="text" id="contact" required></div>
    <button class="submit" type="submit" data-i18n="submitSoilBtn">Submit Soil</button>
  </form>
</section>
  

<!-- Feedback Tab -->
<section id="feedback">
  <h2 data-i18n="feedbackTitle">‚≠ê Submit Feedback</h2>
  <form id="feedbackForm">
    <div class="form-group"><label data-i18n="feedbackNameLabel"">Name</label><input type="text" id="feedbackName" required></div>
    <div class="form-group"><label data-i18n="feedbackSoilLabel">Soil Name</label><input type="text" id="feedbackSoil" required></div>
    <div class="form-group"><label data-i18n="feedbackRatingLabel">Rating</label><select id="rating"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select></div>
    <div class="form-group"><label data-i18n="feedbackCommentsLabel">Comments</label><textarea id="comments"></textarea></div>
    <button class="submit" type="submit" data-i18n="submitFeedbackBtn">Submit Feedback</button>
  </form>
</section>

<!-- Help Tab -->
<section id="help">
  <h2 data-i18n="helpTitle">üÜò Help & Support</h2>
  <p data-i18n="helpDesc">Need help? Contact us:</p>
  <ul>
    <li>üìû Phone: +91-9876543210</li>
    <li>üí¨ WhatsApp: <a href="https://wa.me/919876543210" target="_blank">Chat Now</a></li>
    <li>üìß Email: support@brickwise.in</li>
  </ul>
</section>

<!-- Language Tab -->
<section id="language">
  <h2>üåê Choose Language</h2>
 <select id="languageSelector" onchange="changeLanguage()">
  <option value="en">English</option>
  <option value="te">Telugu</option>
  <option value="hi">Hindi</option>
</select>

</section>

<!-- Settings Tab -->
<section id="settings">
  <h2 data-i18n="settingsTitle">‚öôÔ∏è Settings</h2>
  <p data-i18n="settingsComingSoon">Coming soon: delivery tracking, seller dashboard, notifications.</p>
</section>
<!-- üîê Login Section -->
<section id="login" class="tab-content" style="display:none;">
  <h2>üîê Login</h2>
  <form id="login-form">
    <input type="email" id="login-email" placeholder="Email" required />
    <input type="password" id="login-password" placeholder="Password" required />
    <button type="submit">Login</button>
  </form>
  <p id="login-message"></p>
  <p>Don't have an account? <a href="#" onclick="showTab('signup')">Sign up here</a></p>
</section>

<!-- üìù Sign Up Section -->
<section id="signup" class="tab-content" style="display:none;">
  <h2>üìù Create Account</h2>
  <form id="signup-form">
    <input type="text" id="signup-name" placeholder="Name" required />
    <input type="email" id="signup-email" placeholder="Email" required />
    <input type="password" id="signup-password" placeholder="Password" required />
    <button type="submit">Sign Up</button>
  </form>
  <p id="signup-message"></p>
  <p>Already have an account? <a href="#" onclick="showTab('login')">Login here</a></p>
</section>

<section id="profile" class="tab-content" style="display:none;">
  <h2>üë§ Your Profile</h2>

  <!-- Profile Form (initially visible) -->
  <form id="profile-form">
    <input type="text" id="profile-name" placeholder="Name" required />
    <input type="tel" id="profile-phone" placeholder="Phone" required />
    <input type="text" id="profile-address" placeholder="Address" required />
    <input type="text" id="profile-soil" placeholder="Preferred Soil Type" />
    <button type="submit">Update Profile</button>
  </form>

  <!-- Profile Card (hidden until form is submitted) -->
  <div id="profile-card" style="display:none;">
    <div class="card">
      <h3 id="card-name"></h3>
      <p><strong>üìû Phone:</strong> <span id="card-phone"></span></p>
      <p><strong>üè† Address:</strong> <span id="card-address"></span></p>
      <p><strong>üå± Preferred Soil:</strong> <span id="card-soil"></span></p>
      <button onclick="editProfile()">‚úèÔ∏è Edit</button>
    </div>
  </div>

  <p id="profile-status"></p>
</section>

</body>

<script>
  function showTab(tabId, btn) {
  document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
  document.getElementById(tabId).classList.add('active');
  btn.classList.add('active');
}
fetch("https://script.google.com/macros/s/AKfycbzLItG9fnwwuTWOmaKjKO5wzvdjL2veHq1e-LDgVjsoPxju-8eDgXFYUEQuCMa_SIyp6w/exec")
  .then(res => res.json())
  .then(data => {
    const container = document.getElementById("soilList");
    container.innerHTML = "";
    data.forEach(soil => {
      container.innerHTML += `
        <div class="soil-card">
          <p><strong>Seller:</strong> ${soil.sellerName} <span style="color:green;">[${soil.soilName}]</span></p>
          <h3>${soil.soilName}</h3>
          <p><strong>Location:</strong> ${soil.location}</p>
          <p><strong>Price:</strong> ‚Çπ${soil.price}/ton</p>
          <p><strong>Description:</strong> ${soil.description}</p>
          <p><strong>Contact:</strong> ${soil.contact}</p>
        </div>
      `;
    });
  });



</script>
  <script>
function showTab(tabId, btn) {
  document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
  document.getElementById(tabId).classList.add('active');
  btn.classList.add('active');
}
const soilUploadURL = "https://script.google.com/macros/s/AKfycbzLItG9fnwwuTWOmaKjKO5wzvdjL2veHq1e-LDgVjsoPxju-8eDgXFYUEQuCMa_SIyp6w/exec";     // Soil Upload
const orderURL = "https://script.google.com/macros/s/AKfycbydy-vPloxJmKrCl7mFIo0XhQ1kiehDG2BSbxaPyb2oTSKXzCvyqyjRWFrrfTL_u2WKyg/exec";          // Order Form
const feedbackURL = "https://script.google.com/macros/s/AKfycbxYofA-BFI3JEVrDCoMjUwYoliq5ZWV9koH8T7Bjb-ACk14byfPvDNYGSxzLtj4UxaR/exec";       // Feedback Form
// ‚úÖ Load soil listings into Home tab
function loadSoilListings() {
  fetch("https://script.google.com/macros/s/AKfycbzLItG9fnwwuTWOmaKjKO5wzvdjL2veHq1e-LDgVjsoPxju-8eDgXFYUEQuCMa_SIyp6w/exec")
    .then(res => res.json())
    .then(data => {
      const container = document.getElementById("soilList");
      container.innerHTML = "";

      // üëá Loop through soil data and display
      data.forEach(soil => {
        container.innerHTML += `
          <div class="soil-card">
            <p><strong>Seller:</strong> ${soil.sellerName} <span style="color:green;">[${soil.soilName}]</span></p>
            <h3>${soil.soilName}</h3>
            <p><strong>Location:</strong> ${soil.location}</p>
            <p><strong>Price:</strong> ‚Çπ${soil.price}/ton</p>
            <p><strong>Description:</strong> ${soil.description}</p>
            <p><strong>Contact:</strong> ${soil.contact}</p>
          </div>
        `;
      });
    })
    .catch(err => {
      document.getElementById("soilList").innerHTML = "‚ö†Ô∏è Failed to load data.";
      console.error("Fetch error:", err);
    });
}

// ‚úÖ Seller form submission
document.getElementById("uploadForm").addEventListener("submit", function(e) {
  e.preventDefault();

  const soilName = document.getElementById("soilName").value;
  const location = document.getElementById("location").value;
  const price = document.getElementById("price").value;
  const description = document.getElementById("description").value;
  const sellerName = document.getElementById("sellerName").value;
  const contact = document.getElementById("contact").value;

  fetch(soilUploadURL, {
    method: "POST",
    body: new URLSearchParams({
      soilName,
      location,
      price,
      description,
      sellerName,
      contact
    })
  })
  .then(res => res.text())
  .then(response => {
    alert("‚úÖ Soil uploaded successfully! Redirecting to Home tab...");
    loadSoilListings();
    showTab('home', document.querySelector("nav button.tab:nth-child(1)"));
    document.getElementById("uploadForm").reset();
  })
  .catch(err => {
    alert("‚ö†Ô∏è Failed to upload soil.");
    console.error("Upload error:", err);
  });
});
  // ‚úÖ Order form submission
document.getElementById("orderForm").addEventListener("submit", function(e) {
  e.preventDefault();

  const buyerName = document.getElementById("buyerName").value;
  const buyerPhone = document.getElementById("buyerPhone").value;
  const buyerAddress = document.getElementById("buyerAddress").value;
  const selectedSoil = document.getElementById("selectedSoil").value;
  const quantity = document.getElementById("quantity").value;
fetch(orderURL, {
  method: "POST",
  headers: {
    "Content-Type": "application/x-www-form-urlencoded"
  },
  body: new URLSearchParams({
    buyerName,
    buyerPhone,
    buyerAddress,
    selectedSoil,
    quantity
  })
})

  .then(res => res.text())
  .then(response => {
    alert("‚úÖ Order placed successfully!");
    document.getElementById("orderForm").reset();
  })
  .catch(err => {
    alert("‚ö†Ô∏è Failed to place order.");
    console.error("Order error:", err);
  });
});
// ‚úÖ Feedback form submission
document.getElementById("feedbackForm").addEventListener("submit", function(e) {
  e.preventDefault();
  const name = document.getElementById("feedbackName").value;
  const soilName = document.getElementById("feedbackSoil").value;
  const rating = document.getElementById("rating").value;
  const comments = document.getElementById("comments").value;
 fetch(feedbackURL, {
    method: "POST",
    headers: {
      "Content-Type": "application/x-www-form-urlencoded"
    },
    body: new URLSearchParams({
      name,
      soilName,
      rating,
      comments
    })
  }) 
  .then(res => res.text())
  .then(response => {
    alert("‚úÖ Feedback submitted successfully!");
    document.getElementById("feedbackForm").reset();
  })
  .catch(err => {
    alert("‚ö†Ô∏è Failed to submit feedback.");
    console.error("Feedback error:", err);
  });
});
// ‚úÖ Load soil listings on page load
window.onload = loadSoilListings;
</script>
<script>
const translations = {
  en: {
    availableSoils: "üì¶ Available Soils",
    nameLabel: "Name",
    placeOrder: "Place Order",
    // Add more English translations here...
  },
te: {
  // üåü Feedback Section
  feedbackTitle: "‚≠ê ‡∞Ö‡∞≠‡∞ø‡∞™‡±ç‡∞∞‡∞æ‡∞Ø‡∞Ç ‡∞™‡∞Ç‡∞™‡∞Ç‡∞°‡∞ø",
  feedbackNameLabel: "‡∞™‡±á‡∞∞‡±Å",
  feedbackSoilLabel: "‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø ‡∞™‡±á‡∞∞‡±Å",
  feedbackRatingLabel: "‡∞∞‡±á‡∞ü‡∞ø‡∞Ç‡∞ó‡±ç",
  feedbackCommentsLabel: "‡∞µ‡±ç‡∞Ø‡∞æ‡∞ñ‡±ç‡∞Ø‡∞≤‡±Å",
  submitFeedbackBtn: "‡∞Ö‡∞≠‡∞ø‡∞™‡±ç‡∞∞‡∞æ‡∞Ø‡∞Ç ‡∞™‡∞Ç‡∞™‡∞Ç‡∞°‡∞ø",

  // üõí Place Order Section
  placeOrderTitle: "üõí ‡∞Ü‡∞∞‡±ç‡∞°‡∞∞‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
  orderNameLabel: "‡∞™‡±á‡∞∞‡±Å",
  orderPhoneLabel: "‡∞´‡±ã‡∞®‡±ç ‡∞®‡∞Ç‡∞¨‡∞∞‡±ç",
  orderAddressLabel: "‡∞ö‡∞ø‡∞∞‡±Å‡∞®‡∞æ‡∞Æ‡∞æ",
  orderSoilLabel: "‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø ‡∞™‡±á‡∞∞‡±Å",
  orderQuantityLabel: "‡∞™‡∞∞‡∞ø‡∞Æ‡∞æ‡∞£‡∞Ç (‡∞ü‡∞®‡±ç‡∞®‡±Å‡∞≤‡∞≤‡±ã)",
  placeOrderBtn: "‡∞Ü‡∞∞‡±ç‡∞°‡∞∞‡±ç ‡∞™‡±Ü‡∞ü‡±ç‡∞ü‡∞Ç‡∞°‡∞ø",

  // üì§ Seller Upload Section
  uploadSoilTitle: "üì§ ‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å ‡∞Ö‡∞™‡±ç‚Äå‡∞≤‡±ã‡∞°‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
  uploadSoilNameLabel: "‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø ‡∞™‡±á‡∞∞‡±Å",
  uploadLocationLabel: "‡∞™‡±ç‡∞∞‡∞æ‡∞Ç‡∞§‡∞Ç",
  uploadPriceLabel: "‡∞ß‡∞∞ (‚Çπ)",
  uploadDescriptionLabel: "‡∞µ‡∞ø‡∞µ‡∞∞‡∞£",
  uploadSellerNameLabel: "‡∞µ‡∞ø‡∞ï‡±ç‡∞∞‡±á‡∞§ ‡∞™‡±á‡∞∞‡±Å",
  uploadContactLabel: "‡∞∏‡∞Ç‡∞™‡±ç‡∞∞‡∞¶‡∞ø‡∞Ç‡∞™‡±Å ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å",
  submitSoilBtn: "‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø ‡∞Ö‡∞™‡±ç‚Äå‡∞≤‡±ã‡∞°‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø"
},

hi: {
  // üåü Feedback Section
  feedbackTitle: "‚≠ê ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§≠‡•á‡§ú‡•á‡§Ç",
  feedbackNameLabel: "‡§®‡§æ‡§Æ",
  feedbackSoilLabel: "‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡§æ ‡§®‡§æ‡§Æ",
  feedbackRatingLabel: "‡§∞‡•á‡§ü‡§ø‡§Ç‡§ó",
  feedbackCommentsLabel: "‡§ü‡§ø‡§™‡•ç‡§™‡§£‡§ø‡§Ø‡§æ‡§Å",
  submitFeedbackBtn: "‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§≠‡•á‡§ú‡•á‡§Ç",

  // üõí Place Order Section
  placeOrderTitle: "üõí ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§ï‡§∞‡•á‡§Ç",
  orderNameLabel: "‡§®‡§æ‡§Æ",
  orderPhoneLabel: "‡§´‡§º‡•ã‡§® ‡§®‡§Ç‡§¨‡§∞",
  orderAddressLabel: "‡§™‡§§‡§æ",
  orderSoilLabel: "‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡§æ ‡§®‡§æ‡§Æ",
  orderQuantityLabel: "‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ (‡§ü‡§® ‡§Æ‡•á‡§Ç)",
  placeOrderBtn: "‡§ë‡§∞‡•ç‡§°‡§∞ ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç",

  // üì§ Seller Upload Section
  uploadSoilTitle: "üì§ ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç",
  uploadSoilNameLabel: "‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡§æ ‡§®‡§æ‡§Æ",
  uploadLocationLabel: "‡§∏‡•ç‡§•‡§æ‡§®",
  uploadPriceLabel: "‡§ï‡•Ä‡§Æ‡§§ (‚Çπ)",
  uploadDescriptionLabel: "‡§µ‡§ø‡§µ‡§∞‡§£",
  uploadSellerNameLabel: "‡§µ‡§ø‡§ï‡•ç‡§∞‡•á‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ",
  uploadContactLabel: "‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä",
  submitSoilBtn: "‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç"
},
en: {
  feedbackTitle: "‚≠ê Submit Feedback",
  feedbackNameLabel: "Name",
  feedbackSoilLabel: "Soil Name",
  ratingLabel: "Rating",
  commentsLabel: "Comments",
  submitFeedbackBtn: "Submit Feedback"
},

};

function changeLanguage() {
  const lang = document.getElementById('languageSelector').value;
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (translations[lang][key]) {
      el.textContent = translations[lang][key];
    }
  });
}
</script>
<script>
// üîê Show tab with login protection
function showTab(tabId, btn = null) {
  const isLoggedIn = localStorage.getItem("loggedIn") === "true";
  const protectedTabs = ["seller", "feedback", "upload"];

  if (protectedTabs.includes(tabId) && !isLoggedIn) {
    alert("üîê Please login to access this section.");
    tabId = "login";
  }

  document.querySelectorAll("section, .tab-content").forEach(tab => tab.style.display = "none");
  const target = document.getElementById(tabId);
  if (target) target.style.display = "block";

  document.querySelectorAll("nav button").forEach(b => b.classList.remove("active"));
  if (btn) btn.classList.add("active");
}

// üîê Login logic
document.getElementById("login-form").addEventListener("submit", function(e) {
  e.preventDefault();
  const email = document.getElementById("login-email").value;
  const password = document.getElementById("login-password").value;

  const user = JSON.parse(localStorage.getItem("registeredUser"));

  if (user && user.email === email && user.password === password) {
    localStorage.setItem("loggedIn", "true");
    document.getElementById("login-message").textContent = "‚úÖ Login successful!";
    showTab("home", document.querySelector("nav button.tab:nth-child(1)"));
  } else {
    document.getElementById("login-message").textContent = "‚ùå Invalid credentials.";
  }
});

// üîê Sign-up logic
document.getElementById("signup-form").addEventListener("submit", function(e) {
  e.preventDefault();
  const name = document.getElementById("signup-name").value;
  const email = document.getElementById("signup-email").value;
  const password = document.getElementById("signup-password").value;

  const user = { name, email, password };
  localStorage.setItem("registeredUser", JSON.stringify(user));

  document.getElementById("signup-message").textContent = "‚úÖ Account created! Please log in.";
  showTab("login");
});

// üîê Logout function
function logout() {
  localStorage.removeItem("loggedIn");
  alert("üëã You have been logged out.");
  showTab("login");
}


// üîê Redirect to login on page load
window.onload = function() {
  const isLoggedIn = localStorage.getItem("loggedIn") === "true";
  if (isLoggedIn) {
    showTab("home", document.querySelector("nav button.tab:nth-child(1)"));
  } else {
    showTab("login");
  }
  window.onload = function() {
  const savedEmail = localStorage.getItem("loggedInEmail");
  if (savedEmail) {
    loggedInEmail = savedEmail;

    // ‚úÖ Hide login/signup forms
    document.getElementById("login-form").style.display = "none";
    document.getElementById("signup-form").style.display = "none";

    // ‚úÖ Show profile and load data
    document.getElementById("profile").style.display = "block";
    loadUserProfile(savedEmail);
  }
};
};
let loggedInEmail = ""; // Set this during login

function loadUserProfile(email) {
  fetch(`https://script.google.com/macros/s/AKfycbyGsB73EvSe3KDaXHpJPpuZylpQkq-OSO23cHEqRGlQxiFzPXg-4zJh_VtvDAOLrGFI/exec?email=${email}`)
    .then(res => res.json())
    .then(data => {
      if (data.error) {
        document.getElementById("profile-status").textContent = "‚ö†Ô∏è Profile not found.";
      } else {
        document.getElementById("profile-name").value = data.name;
        document.getElementById("profile-phone").value = data.phone;
        document.getElementById("profile-address").value = data.address;
        document.getElementById("profile-soil").value = data.soil;
      }
	  // ‚úÖ Store logged-in email
loggedInEmail = document.getElementById("login-email").value;

// ‚úÖ Hide sign-up form
document.getElementById("signup-form").style.display = "none";

// ‚úÖ Show profile section
document.getElementById("profile").style.display = "block";

// ‚úÖ Load profile data
loadUserProfile(loggedInEmail);

// ‚úÖ Optionally hide login form too
document.getElementById("login-form").style.display = "none";

    });
// ‚úÖ Show profile tab
showTab('profile', document.querySelector("button[onclick*='profile']"));
document.getElementById("login-form").addEventListener("submit", function(e) {
  e.preventDefault();

  const email = document.getElementById("login-email").value;
  const password = document.getElementById("login-password").value;

  // ‚úÖ Validate credentials (your existing logic here)

  // If login is successful:
  localStorage.setItem("loggedInEmail", email); // ‚úÖ Save email
  loggedInEmail = email;

  // ‚úÖ Update UI
  document.getElementById("login-form").style.display = "none";
  document.getElementById("signup-form").style.display = "none";
  document.getElementById("profile").style.display = "block";

  loadUserProfile(email); // ‚úÖ Load profile data
});
}
document.getElementById("signup-form").addEventListener("submit", function(e) {
  e.preventDefault();

  const name = document.getElementById("signup-name").value;
  const email = document.getElementById("signup-email").value;
  const password = document.getElementById("signup-password").value;
  const phone = document.getElementById("signup-phone").value;

  fetch("https://script.google.com/macros/s/AKfycbyGsB73EvSe3KDaXHpJPpuZylpQkq-OSO23cHEqRGlQxiFzPXg-4zJh_VtvDAOLrGFI/exec", {
    method: "POST",
    headers: { "Content-Type": "application/x-www-form-urlencoded" },
    body: new URLSearchParams({
      action: "signup",
      name,
      email,
      password,
      phone
    })
  })
  .then(res => res.text())
  .then(response => {
    document.getElementById("signup-status").textContent = response;
    document.getElementById("signup-form").reset();
  });
});

document.getElementById("profile-form").addEventListener("submit", function(e) {
  e.preventDefault();

  const name = document.getElementById("profile-name").value;
  const phone = document.getElementById("profile-phone").value;
  const address = document.getElementById("profile-address").value;
  const soil = document.getElementById("profile-soil").value;

  fetch("https://script.google.com/macros/s/AKfycbyGsB73EvSe3KDaXHpJPpuZylpQkq-OSO23cHEqRGlQxiFzPXg-4zJh_VtvDAOLrGFI/exec", {
    method: "POST",
    headers: { "Content-Type": "application/x-www-form-urlencoded" },
    body: new URLSearchParams({
      email: loggedInEmail,
      name,
      phone,
      address,
      soil
    })
  })
  .then(res => res.text())
  .then(response => {
    document.getElementById("profile-status").textContent = "‚úÖ Profile updated!";
    showProfileCard(name, phone, address, soil);
  });
});
function showProfileCard(name, phone, address, soil) {
  document.getElementById("profile-form").style.display = "none";
  document.getElementById("profile-card").style.display = "block";

  document.getElementById("card-name").textContent = name;
  document.getElementById("card-phone").textContent = phone;
  document.getElementById("card-address").textContent = address;
  document.getElementById("card-soil").textContent = soil;
}

function editProfile() {
  document.getElementById("profile-form").style.display = "block";
  document.getElementById("profile-card").style.display = "none";
}


function loadUserProfile(email) {
  fetch(`https://script.google.com/macros/s/AKfycbyGsB73EvSe3KDaXHpJPpuZylpQkq-OSO23cHEqRGlQxiFzPXg-4zJh_VtvDAOLrGFI/exec?email=${email}`)
    .then(res => res.json())
    .then(data => {
      if (data.error) {
        document.getElementById("profile-status").textContent = "‚ö†Ô∏è Profile not found.";
      } else {
        showProfileCard(data.name, data.phone, data.address, data.soil);
        document.getElementById("profile-name").value = data.name;
        document.getElementById("profile-phone").value = data.phone;
        document.getElementById("profile-address").value = data.address;
        document.getElementById("profile-soil").value = data.soil;
      }
    });
}
function resetView() {
  document.getElementById("signup-form").style.display = "block";
  document.getElementById("profile").style.display = "none";
  document.getElementById("login-form").style.display = "block";
}
function logout() {
  localStorage.removeItem("loggedInEmail");
  resetView(); // Show login/signup again
}

function resetView() {
  document.getElementById("login-form").style.display = "block";
  document.getElementById("signup-form").style.display = "block";
  document.getElementById("profile").style.display = "none";
}

</script>

